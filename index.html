<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Semantic Sorter // High-Performance Sequence Optimization</title>
</head>

<body class="bg-[#0b0f1a] text-slate-200 min-h-screen font-sans selection:bg-blue-500/30">
  <div id="app" class="w-full mx-auto px-10 py-12 space-y-12">
    <!-- Header -->
    <header class="space-y-4 border-b border-slate-800 pb-8">
      <div class="flex items-center justify-between">
        <h1 class="text-4xl font-bold tracking-tight text-white flex items-center gap-4">
          Semantic Sorter
        </h1>
        <div class="flex items-center gap-4">
        </div>
      </div>
      <p class="text-slate-400 w-full leading-relaxed text-base">
        A semantic sorting approach based on embeddings, a distance matrix between entities (cosine distances) and a
        solver,
        originally developed for solving vehicle routing problems (VRP) like the Traveling Salesman Problem (TSP).
        The matrix is visualized as table and the embeddings are reduced in their dimensionality via UMAP to plot them
        on a 2D plane.
        Just paste a new-line separated list of words or terms into the text field and optimize.
        Results are usually quite good but not perfect as it is yet lacking a "tree-based" approach where large topic
        clusters are
        identified first. I had this idea for a while and simply needed to get it out of my system.
        If you'd like to contribute, I'm happy to merge creative PRs!
        The tech stack really sums up my geospatial and NLP interests: transformers.js, onnx, umap, vrp, deck.gl.
        Developed by <a href="https://github.com/do-me" target="_blank" class="text-blue-400 hover:underline">Dominik
          Weckmüller</a>. Source code available on <a href="https://github.com/do-me/semantic-sorter" target="_blank"
          class="text-blue-400 hover:underline">GitHub</a>.
      </p>
    </header>

    <main class="space-y-12">
      <!-- Input/Output Grid -->
      <section class="grid grid-cols-1 lg:grid-cols-2 gap-10">
        <div class="space-y-4">
          <div class="flex items-center justify-between">
            <h2 class="text-[13px] font-bold text-slate-500 uppercase tracking-[0.2em]">Data Ingest</h2>
            <div class="flex items-center gap-4">
              <label
                class="flex items-center gap-2 cursor-pointer text-[11px] font-mono text-slate-500 hover:text-blue-400">
                <input type="checkbox" id="param-dedupe" checked class="accent-blue-600"> DEDUPE
              </label>
            </div>
          </div>
          <div class="relative group">
            <textarea id="input-text"
              class="w-full h-[400px] bg-slate-950 border border-slate-800 rounded-lg p-5 text-slate-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 outline-none resize-none font-mono text-sm leading-normal transition-all shadow-2xl"
              placeholder="Enter entities (one per line)...">
cat
revenue
thunderstorm
password
photosynthesis
restaurant
learning
apology
spacecraft
contract
aroma
inflation
toddler
latency
ethics
screen
grief
outage
appointment
algorithm
autumn
merger
marathon
database
violinist
weather
interface
descaling
exoplanet
recycling
philosophy
diversification
lullaby
encryption
painter
traffic
bookmark
renewables
detective
backup
moonlight
budget
refactor
bakery
imagery
electricity
seminar
comma
cybersecurity
celebration           
            </textarea>
          </div>

          <!-- Model Configuration -->
          <div class="space-y-3 p-4 bg-slate-900/30 border border-slate-800 rounded-lg">
            <div class="flex items-center justify-between">
              <label class="text-[11px] font-bold text-slate-500 uppercase tracking-widest">Embedding Model</label>
              <label
                class="flex items-center gap-2 cursor-pointer text-[11px] font-mono text-slate-500 hover:text-blue-400">
                <input type="checkbox" id="param-webgpu" class="accent-blue-600"> WEBGPU
              </label>
            </div>
            <input type="text" id="model-name"
              class="w-full bg-slate-950 border border-slate-800 rounded px-3 py-2 text-sm text-slate-300 focus:ring-1 focus:ring-blue-500 outline-none font-mono"
              value="mixedbread-ai/mxbai-embed-xsmall-v1" placeholder="HuggingFace model ID...">
          </div>

          <button id="sort-btn"
            class="w-full py-5 px-6 bg-blue-600 hover:bg-blue-500 text-white rounded font-bold text-sm tracking-widest transition-all disabled:opacity-20 disabled:grayscale flex items-center justify-center gap-2 transform active:scale-[0.99] shadow-lg shadow-blue-900/20 uppercase">
            <span>Execute Semantic Optimization</span>
          </button>
          <div id="status"
            class="text-[12px] font-mono text-slate-500 min-h-[1.5em] flex items-center gap-4 border-t border-slate-800/10 pt-2">
          </div>
        </div>

        <div class="flex flex-col gap-4 h-full">
          <div class="flex items-center justify-between">
            <h2 class="text-[13px] font-bold text-slate-500 uppercase tracking-[0.2em]">Optimized result</h2>
            <button id="copy-btn"
              class="text-[12px] font-bold text-blue-400 hover:text-blue-300 flex items-center gap-1.5 px-3 py-1.5 rounded bg-blue-400/5 border border-blue-400/20 hover:bg-blue-400/10 transition-all uppercase tracking-wider">
              <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                <rect width="14" height="14" x="8" y="8" rx="2" ry="2" />
                <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2" />
              </svg>
              Copy sequence
            </button>
          </div>
          <div id="output-list"
            class="w-full flex-1 min-h-[400px] bg-slate-950/50 border border-slate-800 rounded-lg p-5 overflow-y-auto space-y-1 relative scrollbar-thin scrollbar-thumb-slate-800">
            <div
              class="absolute inset-0 flex items-center justify-center text-slate-800 font-mono text-[12px] pointer-events-none tracking-widest"
              id="empty-state">
              Ready
            </div>
          </div>
        </div>
      </section>

      <!-- Visualization Section -->
      <section class="space-y-6 pt-10 border-t border-slate-800/50">
        <div class="flex flex-wrap items-center justify-between gap-6">
          <h2 class="text-[13px] font-bold text-slate-500 uppercase tracking-[0.2em]">Geometric Projection</h2>
          <div class="flex flex-wrap gap-3 text-[12px] font-mono items-center">
            <div class="flex gap-4 px-4 py-2 bg-slate-950 rounded border border-slate-800">
              <label class="flex items-center gap-2 cursor-pointer hover:text-blue-400"><input type="checkbox"
                  id="layer-points" checked class="accent-blue-600"> PTS</label>
              <label class="flex items-center gap-2 cursor-pointer hover:text-blue-400"><input type="checkbox"
                  id="layer-lines" checked class="accent-blue-600"> PATH</label>
              <label class="flex items-center gap-2 cursor-pointer hover:text-blue-400"><input type="checkbox"
                  id="layer-pt-labels" checked class="accent-blue-600"> LABEL</label>
              <label class="flex items-center gap-2 cursor-pointer hover:text-blue-400"><input type="checkbox"
                  id="layer-ln-scores" class="accent-blue-600"> METRIC</label>
              <label class="flex items-center gap-2 cursor-pointer hover:text-blue-400"><input type="checkbox"
                  id="layer-arrows" class="accent-blue-600"> VEC</label>
            </div>
            <div class="flex gap-4 px-4 py-2 bg-slate-950 rounded border border-slate-800 items-center">
              <div class="flex items-center gap-2 border-r border-slate-800 pr-4">
                <span class="text-slate-500 uppercase">Rad</span>
                <input type="range" id="param-radius" min="1" max="25" value="4"
                  class="w-16 h-1 accent-blue-600 bg-slate-800 rounded-lg appearance-none cursor-pointer">
              </div>
              <div class="flex items-center gap-2 border-r border-slate-800 pr-4">
                <span class="text-slate-500 uppercase">Wid</span>
                <input type="range" id="param-linewidth" min="1" max="10" value="1"
                  class="w-16 h-1 accent-blue-600 bg-slate-800 rounded-lg appearance-none cursor-pointer">
              </div>
              <div class="flex items-center gap-2 border-r border-slate-800 pr-4">
                <span class="text-slate-500 uppercase">Txt</span>
                <input type="range" id="param-labelsize" min="6" max="32" value="14"
                  class="w-16 h-1 accent-blue-600 bg-slate-800 rounded-lg appearance-none cursor-pointer">
              </div>
              <div class="flex items-center gap-2">
                <span class="text-slate-500 uppercase">Vec</span>
                <input type="range" id="param-arrowsize" min="1" max="20" value="6"
                  class="w-16 h-1 accent-blue-600 bg-slate-800 rounded-lg appearance-none cursor-pointer">
              </div>
            </div>
            <button id="btn-fullscreen"
              class="p-2 bg-slate-950 border border-slate-800 hover:bg-slate-800 rounded text-slate-500 hover:text-blue-400 transition-colors">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                <path
                  d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3" />
              </svg>
            </button>
          </div>
        </div>
        <div id="deck-container"
          class="relative border border-slate-800 rounded-lg overflow-hidden h-[600px] shadow-2xl">
          <canvas id="deck-canvas"></canvas>
        </div>
      </section>

      <!-- Matrix Section -->
      <section class="space-y-6 pt-10 border-t border-slate-800/50">
        <div class="flex items-center justify-between">
          <h2 class="text-[13px] font-bold text-slate-500 uppercase tracking-[0.2em]">Semantic Distance Matrix</h2>
          <div class="flex items-center gap-3 bg-slate-950 px-4 py-2 rounded border border-slate-800">
            <span class="text-[12px] font-mono text-slate-500 uppercase tracking-tighter">Heatmap Threshold:</span>
            <input type="range" id="sim-threshold" min="0" max="1" step="0.01" value="0.8"
              class="w-24 h-1 accent-blue-600 bg-slate-800 rounded-lg appearance-none cursor-pointer">
            <span id="sim-threshold-val"
              class="text-[12px] font-mono text-blue-400 w-10 text-right font-bold">0.80</span>
          </div>
        </div>
        <div class="overflow-x-auto bg-slate-950/30 border border-slate-800 rounded-lg shadow-inner">
          <table id="matrix-table" class="w-full text-left text-[11px] border-collapse font-mono">
            <thead>
              <tr class="bg-slate-900/80 text-slate-500">
                <th class="px-5 py-4 border-b border-slate-800 font-bold uppercase tracking-widest text-[12px]">UID</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-slate-800/30">
              <tr>
                <td class="p-20 text-center text-slate-700 italic tracking-widest uppercase">No data processed</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
    </main>

    <!-- Technical Specs -->
    <footer class="pt-20 border-t border-slate-800 space-y-16">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-16 text-sm leading-relaxed">
        <div class="space-y-3">
          <div class="w-6 h-px bg-blue-500"></div>
          <h3 class="font-bold text-slate-400 uppercase tracking-widest">Transformer.js / LLM</h3>
          <p class="text-slate-500 text-justify">
            Sequence weights are derived from a <span class="text-slate-300">Transformer-based</span> embedding model.
            High-dimensional dense vector models capture deep semantic relationships between entities, executed locally
            for private and efficient inference.
          </p>
        </div>
        <div class="space-y-3">
          <div class="w-6 h-px bg-blue-500"></div>
          <h3 class="font-bold text-slate-400 uppercase tracking-widest">Manifold Learning</h3>
          <p class="text-slate-500 text-justify">
            Geometric projection is handled by <span class="text-slate-300">UMAP</span> (Uniform Manifold Approximation
            and Projection). It preserves both local and global structure of the semantic manifold, mapping
            high-dimensional clusters to a 2D canvas.
          </p>
        </div>
        <div class="space-y-3">
          <div class="w-6 h-px bg-blue-500"></div>
          <h3 class="font-bold text-slate-400 uppercase tracking-widest">Heuristic Solver</h3>
          <p class="text-slate-500 text-justify">
            Route optimization implements a <span class="text-slate-300">Pragmatic TSP</span> solver. It approximates
            the shortest path across the semantic manifold, reducing entropy in the sequence and creating a logical
            "concept journey."
          </p>
        </div>
      </div>

      <div
        class="flex flex-col md:flex-row items-center justify-between gap-6 pt-12 border-t border-slate-800/30 text-[12px] font-mono text-slate-600 uppercase">
        <div class="flex gap-10">
        </div>
        <div class="tracking-widest">
          &copy; 2026 Dominik Weckmüller
        </div>
      </div>
    </footer>
  </div>
  <script type="module" src="/src/main.ts"></script>
</body>

</html>